{% extends "store/base.html" %}
{% load static%}
{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/orders/style.css' %}">
{% endblock %}
{% block title %}My Orders{% endblock %}

{% block content %}
<div class="reading-journey">
    <!-- Page Header -->
    <div class="journey-header">
        <h1 class="journey-title">ğŸ“‹ Your Reading Journey</h1>
        <p class="journey-subtitle">Track your literary adventures and upcoming deliveries</p>
    </div>

    {% if orders %}
    <!-- Orders Timeline -->
    <div class="orders-timeline">
        {% for order in orders %}
        <div class="order-story">
            <!-- Order Header -->
            <div class="story-header">
                <div class="story-meta">
                    <h3 class="story-title">Adventure #{{ order.id }}</h3>
                    <p class="story-date">{{ order.created_at|date:"F j, Y Â· g:i A" }}</p>
                </div>
                <div class="story-status">
                    <div class="status-badge status-{{ order.status|lower }}">
                        <span class="status-icon">
                            {% if order.status == "Pending" %}â³
                            {% elif order.status == "Shipped" %}ğŸšš
                            {% elif order.status == "Delivered" %}âœ…
                            {% elif order.status == "Cancelled" %}âŒ
                            {% else %}ğŸ“¦{% endif %}
                        </span>
                        <span class="status-text">{{ order.status }}</span>
                    </div>
                    <div class="payment-badge">
                        <span class="payment-icon">ğŸ’³</span>
                        {{ order.payment_method }}
                    </div>
                </div>
            </div>

            <!-- Order Content -->
            <div class="story-content">
                <!-- Delivery Information -->
                <div class="delivery-card">
                    <div class="card-header">
                        <span class="card-icon">ğŸ </span>
                        <h4>Delivery Destination</h4>
                    </div>
                    <div class="card-body">
                        <div class="address-details">
                            <p class="recipient">{{ order.full_name }}</p>
                            <p class="address">{{ order.address }}</p>
                            <p class="city-pincode">{{ order.city }} - {{ order.pincode }}</p>
                            <p class="phone">ğŸ“ {{ order.phone }}</p>
                        </div>
                    </div>
                </div>

                <!-- Order Items -->
                <div class="books-card">
                    <div class="card-header">
                        <span class="card-icon">ğŸ“š</span>
                        <h4>Literary Treasures</h4>
                        <span class="items-count">{{ order.items.all|length }} item{{ order.items.all|length|pluralize }}</span>
                    </div>
                    <div class="card-body">
                        <div class="books-grid">
                            {% for item in order.items.all %}
                            <div class="book-journey-item">
                                <div class="book-cover-small">
                                    {% if item.book.image %}
                                    <img src="{{ item.book.image.url }}" alt="{{ item.book.title }}" class="book-image-small">
                                    {% else %}
                                    <div class="book-placeholder-small">ğŸ“–</div>
                                    {% endif %}
                                </div>
                                <div class="book-details-small">
                                    <h5 class="book-title-small">{{ item.book.title }}</h5>
                                    <p class="book-quantity">Quantity: {{ item.quantity }}</p>
                                    <p class="book-price">â‚¹{{ item.price|floatformat:2 }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <!-- Order Summary -->
                <div class="summary-card">
                    <div class="total-display">
                        <span class="total-label">Journey Total</span>
                        <span class="total-amount">â‚¹{{ order.total|floatformat:2 }}</span>
                    </div>
                    <div class="progress-indicator">
                        <div class="progress-labels">
                            <span class="progress-label {% if order.status == 'Pending' %}active{% endif %}">Ordered</span>
                            <span class="progress-label {% if order.status == 'Shipped' %}active{% endif %}">Shipped</span>
                            <span class="progress-label {% if order.status == 'Delivered' %}active{% endif %}">Delivered</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-{{ order.status|lower }}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {% else %}
    <!-- Empty State -->
    <div class="empty-journey">
        <div class="empty-illustration">
            <div class="floating-book">ğŸ“–</div>
            <div class="floating-book">âœ¨</div>
            <div class="floating-book">ğŸ”</div>
        </div>
        <h2 class="empty-title">Your Adventure Awaits</h2>
        <p class="empty-message">Your reading journey hasn't begun yet. Start exploring our collection to fill this space with wonderful stories.</p>
        <a href="{% url 'book_list' %}" class="begin-journey-btn">
            <span class="journey-icon">ğŸŒŸ</span>
            <span>Begin Your Literary Adventure</span>
            <span class="journey-arrow">â†’</span>
        </a>
    </div>
    {% endif %}

    <!-- Reading Inspiration -->
    {% if orders %}
    <div class="reading-inspiration">
        <div class="inspiration-content">
            <h3>Continue Your Reading Journey</h3>
            <p>Every book you own is a new adventure waiting to be explored</p>
            <a href="{% url 'book_list' %}" class="discover-more-btn">
                <span>Discover More Stories</span>
                <span class="discover-arrow">â†’</span>
            </a>
        </div>
    </div>
    {% endif %}
</div>

{% endblock %}