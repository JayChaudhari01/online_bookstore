{% extends 'store/base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home/style.css' %}">
{% endblock %}

{% block content %}
<!-- Welcome Popup Modal -->
<div id="welcomeModal" class="welcome-modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        <div class="modal-body">
            <h2 class="modal-title">Welcome to BookMart</h2>
            <p class="modal-text">Get up to 70% off on selected books</p>
            <p class="modal-offer">Use code: <strong>WELCOME70</strong></p>
            <a href="{% url 'book_list' %}" class="modal-btn">Shop Now</a>
        </div>
    </div>
</div>

<!-- Hero Slider -->
<div class="hero-slider">
    <div class="slider-wrapper">
        <div class="slide active">
            <div class="slide-image" style="background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=1200') center/cover;">
                <div class="slide-overlay">
                    <h2 class="slide-title">Best Sellers of 2025</h2>
                    <p class="slide-subtitle">Discover trending books everyone's reading</p>
                    <a href="{% url 'book_list' %}" class="slide-btn">Shop now</a>
                </div>
            </div>
        </div>
        <div class="slide">
            <div class="slide-image" style="background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1512820790803-83ca734da794?w=1200') center/cover;">
                <div class="slide-overlay">
                    <h2 class="slide-title">New Arrivals</h2>
                    <p class="slide-subtitle">Fresh releases added daily</p>
                    <a href="{% url 'book_list' %}?sort=new" class="slide-btn">Explore</a>
                </div>
            </div>
        </div>
        <div class="slide">
            <div class="slide-image" style="background: linear-gradient(135deg, rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=1200') center/cover;">
                <div class="slide-overlay">
                    <h2 class="slide-title">Up to 50% Off</h2>
                    <p class="slide-subtitle">Limited time deals on bestsellers</p>
                    <a href="{% url 'book_list' %}" class="slide-btn">View deals</a>
                </div>
            </div>
        </div>
    </div>
    <button class="slider-arrow prev" onclick="changeSlide(-1)">‹</button>
    <button class="slider-arrow next" onclick="changeSlide(1)">›</button>
    <div class="slider-dots">
        <span class="dot active" onclick="goToSlide(0)"></span>
        <span class="dot" onclick="goToSlide(1)"></span>
        <span class="dot" onclick="goToSlide(2)"></span>
    </div>
</div>

<!-- Categories Section -->
<div class="section-container">
    <h2 class="section-heading">Shop by Category</h2>
    <div class="categories-grid">
        <a href="{% url 'book_list' %}?category=fiction" class="category-card">
            <div class="category-image" style="background: url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=400') center/cover;"></div>
            <div class="category-info">
                <h3 class="category-name">Fiction</h3>
                <p class="category-desc">Explore captivating stories</p>
            </div>
        </a>
        <a href="{% url 'book_list' %}?category=non-fiction" class="category-card">
            <div class="category-image" style="background: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400') center/cover;"></div>
            <div class="category-info">
                <h3 class="category-name">Non-Fiction</h3>
                <p class="category-desc">Real-world insights</p>
            </div>
        </a>
        <a href="{% url 'book_list' %}?sort=bestseller" class="category-card">
            <div class="category-image" style="background: url('https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=400') center/cover;"></div>
            <div class="category-info">
                <h3 class="category-name">Best Sellers</h3>
                <p class="category-desc">Most popular titles</p>
            </div>
        </a>
        <a href="{% url 'book_list' %}?sort=new" class="category-card">
            <div class="category-image" style="background: url('https://images.unsplash.com/photo-1512820790803-83ca734da794?w=400') center/cover;"></div>
            <div class="category-info">
                <h3 class="category-name">New Releases</h3>
                <p class="category-desc">Latest additions</p>
            </div>
        </a>
    </div>
</div>

<!-- Today's Deals -->
<div class="deals-banner">
    <div class="deals-content">
        <h2 class="deals-title">Today's Deals</h2>
        <p class="deals-subtitle">Limited time offers</p>
        <a href="{% url 'book_list' %}" class="deals-btn">See all deals</a>
    </div>
</div>

<!-- Trust Badges -->
<div class="trust-section">
    <div class="trust-item">
        <div class="trust-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#232F3E" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
        </div>
        <div class="trust-text">
            <h4>Secure Payment</h4>
            <p>100% protected</p>
        </div>
    </div>
    <div class="trust-item">
        <div class="trust-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#232F3E" stroke-width="2">
                <rect x="1" y="3" width="15" height="13"/>
                <path d="M16 8v10l5-3V5z"/>
            </svg>
        </div>
        <div class="trust-text">
            <h4>Fast Delivery</h4>
            <p>3-5 business days</p>
        </div>
    </div>
    <div class="trust-item">
        <div class="trust-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#232F3E" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
        </div>
        <div class="trust-text">
            <h4>Easy Returns</h4>
            <p>30-day policy</p>
        </div>
    </div>
    <div class="trust-item">
        <div class="trust-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#232F3E" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
        </div>
        <div class="trust-text">
            <h4>24/7 Support</h4>
            <p>Always here to help</p>
        </div>
    </div>
</div>

<script>
// Welcome Modal
window.onload = function() {
    if (!sessionStorage.getItem('modalShown')) {
        document.getElementById('welcomeModal').style.display = 'flex';
        sessionStorage.setItem('modalShown', 'true');
    }
}

function closeModal() {
    document.getElementById('welcomeModal').style.display = 'none';
}

// Slider
let currentSlide = 0;
const slides = document.querySelectorAll('.slide');
const dots = document.querySelectorAll('.dot');

function showSlide(n) {
    slides[currentSlide].classList.remove('active');
    dots[currentSlide].classList.remove('active');
    
    currentSlide = (n + slides.length) % slides.length;
    
    slides[currentSlide].classList.add('active');
    dots[currentSlide].classList.add('active');
}

function changeSlide(direction) {
    showSlide(currentSlide + direction);
}

function goToSlide(n) {
    showSlide(n);
}

// Auto slide
setInterval(() => changeSlide(1), 5000);
</script>
{% endblock %}